# iOS 全屏功能测试指南

## 测试环境
- 设备：iPhone/iPad
- 浏览器：Safari
- 测试场景：多种全屏模式

## 测试检查项

### 1. 自动全屏功能
- [ ] 点击"新学习"按钮
- [ ] 视频应该自动进入全屏模式
- [ ] **不应该**出现AirPlay提示
- [ ] 屏幕镜像应该正常工作

### 2. 手动全屏功能
- [ ] 点击视频播放器的"最大化"按钮
- [ ] 应该进入全屏模式
- [ ] **不应该**出现AirPlay提示
- [ ] 屏幕镜像应该正常工作

### 3. iOS Safari浏览器界面处理
- [ ] 在全屏模式下，视频控制栏应该完全可见
- [ ] 进度条和下方控制按钮不应该被浏览器界面遮挡
- [ ] 滚动时视频容器应该正确调整高度

### 4. 屏幕方向处理
- [ ] 横屏视频应该自动锁定为横向
- [ ] 退出全屏时应该解锁屏幕方向
- [ ] 竖屏视频应该保持竖向

### 5. 退出全屏功能
- [ ] 按ESC键可以退出全屏
- [ ] 点击播放器按钮可以退出全屏
- [ ] 所有样式应该正确重置
- [ ] 页面布局应该恢复正常

## 关键改进点

### AirPlay禁用
- 使用容器全屏而非视频原生全屏
- 设置`x-webkit-airplay="deny"`
- 禁用视频的`webkitShowPlaybackTargetPicker`

### 浏览器界面补偿
- 使用Visual Viewport API检测浏览器界面高度
- 动态调整播放器容器高度和位置
- 监听视口变化事件

### 样式优化
- 固定定位避免滚动问题
- 正确的z-index层级
- 完整的样式重置

## 预期结果
- ✅ 自动全屏正常工作
- ✅ 不触发AirPlay
- ✅ 屏幕镜像兼容
- ✅ 视频控制栏完全可见
- ✅ 流畅的用户体验

## 故障排除
如果发现问题：
1. 检查浏览器控制台是否有错误
2. 验证Visual Viewport API是否可用
3. 确认AirPlay设置是否正确
4. 测试不同的视频尺寸和方向
